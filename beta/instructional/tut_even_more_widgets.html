


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>More on Enaml Widgets &mdash; enaml 0.3alpha documentation</title>
    
    <link rel="stylesheet" href="../_static/enthought_doc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/et.ico"/>
    <link rel="top" title="enaml 0.3alpha documentation" href="../index.html" />
    <link rel="up" title="Enaml Tutorials" href="tutorials_home.html" />
    <link rel="next" title="Examples Gallery" href="example.html" />
    <link rel="prev" title="More on Enaml Widgets" href="tut_more_widgets.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../enaml-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="example.html" title="Examples Gallery"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tut_more_widgets.html" title="More on Enaml Widgets"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">enaml 0.3alpha documentation</a> &raquo;</li>
          <li><a href="index.html" >Enaml Getting Started Guide and Tutorials</a> &raquo;</li>
          <li><a href="tutorials_home.html" accesskey="U">Enaml Tutorials</a> &raquo;</li>
  
    <li><a href="#">More on Enaml Widgets</a></li>
  

      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/e-logo-rev.png" alt="Logo"/>
            </a></p>
<h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">More on Enaml Widgets</a><ul>
<li><a class="reference internal" href="#building-views-from-parts">Building Views From Parts</a></li>
<li><a class="reference internal" href="#custom-validators">Custom Validators</a></li>
<li><a class="reference internal" href="#visibility-of-widgets-and-constraints">Visibility of Widgets and Constraints</a></li>
<li><a class="reference internal" href="#more-constraints">More Constraints</a></li>
<li><a class="reference internal" href="#other-things-to-note">Other Things to Note</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/instructional/tut_even_more_widgets.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="more-on-enaml-widgets">
<span id="tutorial-even-more-widgets"></span><h1>More on Enaml Widgets<a class="headerlink" href="#more-on-enaml-widgets" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial, we take a closer look at some of the widgets available for
building GUI&#8217;s in Enaml by building on the <a class="reference internal" href="tut_person.html#john-doe"><em>John Doe tutorial</em></a>. We will explore some of the things you can do with widgets that
you can&#8217;t do or that are hard to do in other GUI builders.</p>
<p>This example will use the employee example
<tt class="xref download docutils literal"><span class="pre">employee_view.enaml</span></tt>
to explore these concepts.</p>
<img alt="../_images/employee.png" src="../_images/employee.png" />
<div class="section" id="building-views-from-parts">
<h2>Building Views From Parts<a class="headerlink" href="#building-views-from-parts" title="Permalink to this headline">¶</a></h2>
<p>The Enaml language allows you to define re-usable parts of your view that can
defined separately, and then built into a larger interface as needed.  In the
<tt class="docutils literal"><span class="pre">employee_view.enaml</span></tt> example, the code defines two forms, one for an employee,
and one for an employer (abbreviated here for succinctness):</p>
<div class="highlight-python"><pre>enamldef EmployeeForm(Form):
    attr employee
    attr show_employer: bool = False
    Label:
        text = "First name:"
    Field:
        text := employee.first_name

    # ... etc

    ToggleButton:
        checked := show_employer
        text &lt;&lt; ('Hide' if show_employer else 'Show') + ' Employer Details'

enamldef EmployerForm(Form):
    attr employer
    Label:
        text = "Company:"
    Field:
        text &lt;&lt; employer.company_name
        enabled &lt;&lt; en_cb.checked
    # ... etc</pre>
</div>
<p>This sort of Enaml code should be fairly familiar to you at this point
(although there are some new things which we will highlight later).
Previously all of our <tt class="docutils literal"><span class="pre">enamldef</span></tt> operations had used <tt class="docutils literal"><span class="pre">MainWindow</span></tt> as the
widget that was being extended, but here we are using <tt class="docutils literal"><span class="pre">Form</span></tt>.  Any widget can
be used as the basis for another in an <tt class="docutils literal"><span class="pre">enamldef</span></tt> command, so you can create
your own custom, re-usable versions of <tt class="docutils literal"><span class="pre">Label</span></tt>, <tt class="docutils literal"><span class="pre">Field</span></tt>, <tt class="docutils literal"><span class="pre">PushButton</span></tt>,
etc. using <tt class="docutils literal"><span class="pre">enamldef</span></tt>.</p>
<p>Having defined the two forms, there is a third definition in the .enaml file:</p>
<div class="highlight-python"><pre>enamldef EmployeeView(MainWindow):
    id: main
    attr employee

    title &lt;&lt; "Employee Record for: %s, %s" % (employee.last_name,
                                            employee.first_name)
    Container:
        constraints &lt;&lt; [
            vertical(top, top_box, bottom_box.when(bottom_box.visible), bottom),
            horizontal(left, spacer.flex(), top_box, spacer.flex(), right),
            horizontal(left, spacer.flex(), bottom_box, spacer.flex(), right),
            align('midline', top_form, bottom_form, clear_invisible=False)
        ]
        GroupBox:
            id: top_box
            title = "Personal Details"
            EmployeeForm:
                id: top_form
                # We access the employee object through the identifier
                # 'main' here, because the EmployeeForm also has an
                # 'employee' attribute declared, and that would be
                # found first.
                employee = main.employee
        GroupBox:
            id: bottom_box
            title = "Employer Details"
            visible &lt;&lt; top_form.show_employer
            EmployerForm:
                id: bottom_form
                employer &lt;&lt; employee.boss</pre>
</div>
<p>This part of the code should be fairly familiar at this point: we have a
<tt class="docutils literal"><span class="pre">MainWindow</span></tt> class which contains a <tt class="docutils literal"><span class="pre">Container</span></tt> which in turn contains two
<tt class="docutils literal"><span class="pre">GroupBox</span></tt> widgets.  We haven&#8217;t seen <tt class="docutils literal"><span class="pre">GroupBox</span></tt> widgets before, but they are
special containers that draw a box around their contents, and have an optional
title.</p>
<p>In the first <tt class="docutils literal"><span class="pre">GroupBox</span></tt> we see that it&#8217;s contents are just one <tt class="docutils literal"><span class="pre">EmployeeForm</span></tt>
where the <tt class="docutils literal"><span class="pre">employee</span></tt> attribute is initialized to <tt class="docutils literal"><span class="pre">main.employee</span></tt>.  This
shows you that once you have defined a new widget type with <tt class="docutils literal"><span class="pre">enamldef</span></tt>, it
can be used just like any other widget, and that you can bind to its attributes
in exactly the same way that you can bind to the attributes of base widget
types.</p>
<p>The second GroupBox is similar, except that it contains an EmployerForm.</p>
</div>
<div class="section" id="custom-validators">
<h2>Custom Validators<a class="headerlink" href="#custom-validators" title="Permalink to this headline">¶</a></h2>
<p>In an earlier example we saw that Enaml has certain types of <tt class="docutils literal"><span class="pre">Field</span></tt> that
perform validation.  You can define your own custom validators to check for
specific types of input.  The phone number field in the employee example has
a custom validator:</p>
<div class="highlight-python"><pre>Field:
    value := employee.phone
    validator = PhoneNumberValidator()
    bgcolor &lt;&lt; 'unacceptable' if not acceptable else 'none'</pre>
</div>
<p>This validator is imported from
<tt class="xref download docutils literal"><span class="pre">phone_validator.py</span></tt>
and looks like this:</p>
<p>A validator has to implement three methods: <tt class="docutils literal"><span class="pre">validate</span></tt>, <tt class="docutils literal"><span class="pre">convert</span></tt> and
<tt class="docutils literal"><span class="pre">format</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">validate</span></tt> method takes a string which is the current contents of
the widget, and is expected to return one of three values: <tt class="docutils literal"><span class="pre">self.ACCEPTABLE</span></tt>
if the text matches a valid value, <tt class="docutils literal"><span class="pre">self.INTERMEDIATE</span></tt> if the text does not
match a valid value, but could be a sub-string of a valid value, or
<tt class="docutils literal"><span class="pre">self.INVALID</span></tt> if there is no way that this string could be valid.</p>
<p>The validate method is called on any keypress in the widget, and the value will
only be allowed to be set into the contents of the widget if the response is
either <tt class="docutils literal"><span class="pre">ACCEPTABLE</span></tt> or <tt class="docutils literal"><span class="pre">INTERMEDIATE</span></tt>.  Since validate methods are called
frequently, they should attempt to be as fast as possible.</p>
<p>The <tt class="docutils literal"><span class="pre">convert</span></tt> method takes a string which is the current contents of
the widget and converts it to the required type for the model value.
The <tt class="docutils literal"><span class="pre">format</span></tt> method takes a model value and converts it to a string
representation.
The <tt class="docutils literal"><span class="pre">convert</span></tt> and <tt class="docutils literal"><span class="pre">format</span></tt> methods should be inverses, so that
<tt class="docutils literal"><span class="pre">convert(format(value))</span> <span class="pre">==</span> <span class="pre">value</span></tt>.</p>
</div>
<div class="section" id="visibility-of-widgets-and-constraints">
<h2>Visibility of Widgets and Constraints<a class="headerlink" href="#visibility-of-widgets-and-constraints" title="Permalink to this headline">¶</a></h2>
<p>Looking at the example, you will see that there is a button on the
<tt class="docutils literal"><span class="pre">EmployeeForm</span></tt> that toggles the visibility of the bottom <tt class="docutils literal"><span class="pre">GroupBox</span></tt>.  This
is done via the <tt class="docutils literal"><span class="pre">visible</span></tt> attribute of the <tt class="docutils literal"><span class="pre">GroupBox</span></tt>.  Most widgets have a
<tt class="docutils literal"><span class="pre">visible</span></tt> attribute that can be changed this way.</p>
<p>When a widget is not visible, it still participates in constraints by default.
However frequently you want to remove invisible widgets from the set of
constraints, and so the constraints helpers, such as <tt class="docutils literal"><span class="pre">align</span></tt> will automatically
remove invisible widgets from the set of constraints.  In cases where you still
what the constraints to apply, you can set the <tt class="docutils literal"><span class="pre">clear_invisible</span></tt> flag to
<tt class="docutils literal"><span class="pre">False</span></tt> on the constraints helper:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">align</span><span class="p">(</span><span class="s">&#39;midline&#39;</span><span class="p">,</span> <span class="n">top_form</span><span class="p">,</span> <span class="n">bottom_form</span><span class="p">,</span> <span class="n">clear_invisible</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>For constraints applied without the use of helper functions, you can use
Python&#8217;s ... if ... else ... expressions to change the constraints as needed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">top_box</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">bottom_box</span><span class="o">.</span><span class="n">left</span><span class="p">]</span> <span class="k">if</span> <span class="n">bottom_form</span><span class="o">.</span><span class="n">visible</span> <span class="k">else</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Additionally, in the constraints above you can see that the vertical layout
constraint:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vertical</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">top_box</span><span class="p">,</span> <span class="n">bottom_box</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">bottom_box</span><span class="o">.</span><span class="n">visible</span><span class="p">),</span> <span class="n">bottom</span><span class="p">)</span>
</pre></div>
</div>
<p>has the expression <tt class="docutils literal"><span class="pre">bottom_box.when(bottom_box.visible)</span></tt>.  Any widget or
constraint helper can have a <tt class="docutils literal"><span class="pre">when</span></tt> method appended which contains an
expression which is evaluated as a boolean.  If the expression is true, then
the widget is included by the layout helper, otherwise it is not.  This gives
another convenient way to toggle the participation of widgets in constraints.</p>
</div>
<div class="section" id="more-constraints">
<h2>More Constraints<a class="headerlink" href="#more-constraints" title="Permalink to this headline">¶</a></h2>
<p>Looking closely at the constraints of the outermost <tt class="docutils literal"><span class="pre">Container</span></tt>, you may notice
that there is the constraint:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">align</span><span class="p">(</span><span class="s">&#39;midline&#39;</span><span class="p">,</span> <span class="n">top_form</span><span class="p">,</span> <span class="n">bottom_form</span><span class="p">,</span> <span class="n">clear_invisible</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">Form</span></tt> widgets in Enaml have an additional position beyond the usual ones
described in the previous chapter: the &#8216;midline&#8217;.  This represents the line
between the left and right-hand columns of widgets.  Without this constraint,
the view looks like this:</p>
<img alt="../_images/employee_no_midline.png" src="../_images/employee_no_midline.png" />
<p>As you can see, by specifying that the two forms&#8217; midlines align, the two forms
look more unified.  This particular sort of alignment can be very tedious to
achieve in a conventional nested box layout system.</p>
<p>Advanced developers who are building their own widget classes can create
additional constraint variables for their widgets.  Read the source code of the
Form widget to see the basics of how to do this.</p>
</div>
<div class="section" id="other-things-to-note">
<h2>Other Things to Note<a class="headerlink" href="#other-things-to-note" title="Permalink to this headline">¶</a></h2>
<p>In this example you also see a number of different widget types that we have not
seen before:</p>
<dl class="docutils">
<dt>DateEdit:</dt>
<dd>This is a field type designed for editing Python <tt class="docutils literal"><span class="pre">datetime.date</span></tt>
objects.</dd>
<dt>CheckBox:</dt>
<dd>This is a simple checkbox widget that can toggle a value True or False.</dd>
<dt>ToggleButton:</dt>
<dd>This is a like the checkbox widget in that it toggles a value True or
False, but instead it looks like a push button.  The button highlights
when it is True.</dd>
</dl>
<p>Additionally, the Password field shows how to set a field to hide the text
being entered, as you would normally want for a password entry field.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../enaml-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="example.html" title="Examples Gallery"
             >next</a> |</li>
        <li class="right" >
          <a href="tut_more_widgets.html" title="More on Enaml Widgets"
             >previous</a> |</li>
        <li><a href="../index.html">enaml 0.3alpha documentation</a> &raquo;</li>
          <li><a href="index.html" >Enaml Getting Started Guide and Tutorials</a> &raquo;</li>
          <li><a href="tutorials_home.html" >Enaml Tutorials</a> &raquo;</li>
  
    <li><a href="#">More on Enaml Widgets</a></li>
  

      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Enthought, Inc..
      Last updated on Sep 11, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>